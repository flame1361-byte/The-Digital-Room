<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheDigitalRoom v2.0 // Cyber-Sync</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Audio Unlock Overlay -->
    <div id="audio-unlock-overlay"
        style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(20px);">
        <i class="fa-solid fa-volume-high"
            style="font-size: 4rem; color: var(--accent-primary); margin-bottom: 20px; text-shadow: var(--shadow-glow);"></i>
        <h2 style="font-family: 'JetBrains Mono'; margin-bottom: 10px;">SYSTEM LOCKED</h2>
        <p style="color: var(--text-secondary);">Click anywhere to initialize audio engine.</p>
    </div>

    <div id="app-container">
        <!-- Header -->
        <header>
            <div class="brand">
                <i class="fa-solid fa-layer-group"></i>
                TheDigitalRoom <span>v2.0</span>
            </div>

            <div id="auth-nav" style="display: flex; gap: 10px; align-items: center;">
                <div id="conn-status" class="status-badge">OFFLINE</div>
                <button id="login-nav-btn" class="btn btn-primary">LOGIN</button>
                <div id="user-display" style="font-weight: 600; display: none;">Guest</div>
            </div>
        </header>

        <!-- Main Content Grid -->
        <main>
            <!-- Left Sidebar: Users -->
            <aside id="user-list" class="glass-panel">
                <div class="panel-header">
                    <span>Connected Entities</span>
                    <span id="user-count" class="mono">0</span>
                </div>
                <div id="users-container" style="overflow-y: auto; flex: 1;">
                    <!-- User Items Injected Here -->
                </div>

                <!-- Voice Channel (Mini) -->
                <div style="padding: 15px; border-top: var(--panel-border);">
                    <button id="voice-join-btn" class="btn" style="width: 100%; font-size: 0.8rem;" aria-label="Join voice channel">
                        <i class="fa-solid fa-microphone"></i> JOIN VOICE
                    </button>
                </div>
            </aside>

            <!-- Center Stage: Player & Chat -->
            <section id="center-panel">

                <!-- Hero Player -->
                <div class="glass-panel hero-player">
                    <div class="panel-header">
                        <span><i class="fa-brands fa-soundcloud"></i> Sync Engine Active</span>
                        <div id="timer-display" class="mono" style="color: var(--accent-primary);">00:00</div>
                    </div>

                    <div id="dj-booth-display">
                        <div class="album-art-glow">
                            <!-- Art Injected via JS -->
                            <div id="placeholder-art"
                                style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.1); font-size: 3rem;">
                                <i class="fa-solid fa-compact-disc"></i>
                            </div>
                        </div>

                        <div class="track-info">
                            <div id="current-track-name" class="track-title">Waiting for Signal...</div>
                            <div id="current-dj-name" class="track-artist">NO DJ CONNECTED</div>
                        </div>

                        <div class="control-bar">
                            <button id="claim-dj-btn" class="btn btn-primary">TAKE CONTROL</button>
                        </div>

                        <!-- Invisible Widget -->
                        <iframe id="sc-widget" width="100%" height="20" scrolling="no" frameborder="no" allow="autoplay"
                            src="https://w.soundcloud.com/player/?url="
                            style="opacity: 0.01; position: absolute; pointer-events: none;"></iframe>
                    </div>
                </div>

                <!-- Chat System -->
                <div id="chat-system" class="glass-panel">
                    <div class="panel-header">
                        <span>Global Frequency</span>
                    </div>
                    <div id="chat-messages">
                        <div class="message system">
                            <span class="timestamp mono">SYS</span>
                            <span style="color: var(--accent-primary);">Welcome to v2.0. Systems online.</span>
                        </div>
                    </div>
                    <div id="chat-input-area">
                        <input type="text" id="chat-input" placeholder="Transmit message..." autocomplete="off">
                        <button id="send-btn" class="btn" aria-label="Send message"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </div>

            </section>

            <!-- Right Sidebar: Social/Settings -->
            <aside id="profile-box" class="glass-panel"
                style="background: transparent; box-shadow: none; border: none; backdrop-filter: none;">

                <div class="glass-panel" style="margin-bottom: 20px;">
                    <div class="panel-header">Settings</div>
                    <div style="padding: 15px; display: flex; flex-direction: column; gap: 10px;">
                        <button id="change-name-btn" class="btn">EDIT PROFILE</button>
                        <button id="settings-trigger" class="btn">APP SETTINGS</button>
                    </div>
                </div>

                <div class="ad-card">
                    <div>SPONSORED SLOT</div>
                </div>

            </aside>
        </main>
    </div>

    <!-- Modals (Re-using logic, changing structure later if needed) -->
    <!-- Hidden Elements for JS logic compatibility -->
    <div id="dj-toolset" style="display: none;"></div>

    <!-- Socket.io and SoundCloud Widget API -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script src="VoiceManager.js"></script>
    <script src="StreamManager.js"></script>
    <script src="client.js"></script>
</body>

</html>